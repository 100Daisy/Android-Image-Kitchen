#!/system/bin/sh
# AIK-mobile/aik: command-line shortcut to the work dir
# osm0sis @ xda-developers

aik=/data/local/AIK-mobile;

case $1 in
  --restore)
    # fix shortcut symlink
    if [ -e /su ]; then
      su -c "ln -s $aik/bin/aik /su/bin/aik";
    else
      su -c "mount -o rw,remount -t auto /system; \
             rm -f /system/xbin/aik; \
             ln -s $aik/bin/aik /system/xbin/aik; \
             mount -o ro,remount -t auto /system";
    fi;
    echo "aik: symlink restored!";
  ;;
  *)
    # go local and request root
    cd $aik;
    PATH="$PATH:$aik" su;
  ;;
esac;

